<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<link href="http://hayageek.github.io/jQuery-Upload-File/uploadfile.min.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://hayageek.github.io/jQuery-Upload-File/jquery.uploadfile.min.js"></script>






<script>
	$(document).ready(function(){

		Array.prototype.remove = function(v) { this.splice(this.indexOf(v) == -1 ? this.length : this.indexOf(v), 1); }

		$.ajax({
			method : "GET",
			url: "script.php",
			dataType: 'json',
			success: function(data){
				/*
				console.log(data);
				console.log("================");
				console.log(data[0]);
			
				console.log(typeof(data[0]));
				*/
				var obj = JSON.parse(data[0]);
				var topics = new Array();
				console.log(obj.body);	
				for (i =0, j=data.length; i<j;i++){
					topics[i] = JSON.parse(data[i]);
				}
				
				topics.forEach(function(topic){
					console.log(topic.body);
				});
				show(topics);






		}

		


		 });
				

				 function show(topics){



				 	
						
				 var v1,v2,v3,ran = Math.floor((Math.random() * topics.length) + 0);
				 		while (v1 == v2 || v2 == v3 || v1 == v3){
				 			v1 = Math.floor((Math.random() * topics.length) + 0);
				 			v2 = Math.floor((Math.random() * topics.length) + 0);
				 			v3 = Math.floor((Math.random() * topics.length) + 0);
				 		}
				 		var ar = Array(v1,v2,v3);
				 		ar.forEach(function(ran){

						$('body')
						.append("<div class='title'>"+topics[ran].title+"</div>")
				 		.append("<div class='body'>"+topics[ran].body+"</div>")
				 		.append("<div class='topic_id'>"+topics[ran].topic_id+"</div>")
				 		
				 		});
				 	
				 	var k =0,v4=Math.floor((Math.random() * topics.length) + 0);
				 		$('body')
						.append("<div class='title'>"+topics[ran].title+"</div>");
				 	
				 		
					setInterval(function(){

								$('body')
						.append("<div class='title'>"+topics[v4].title+"</div>")
				 		.append("<div class='body'>"+topics[v4].body+"</div>")
				 		.append("<div class='topic_id'>"+topics[v4].topic_id+"</div>");
				 	
				 	 v4 = Math.floor((Math.random() * topics.length) + 0)
				 	  var titles =	$('div.title').toArray(),
				 	  	  body = $('div.body').toArray(),
				 	  	  topic_id = $('div.topic_id').toArray();
				 			  $(titles[k]).css('display','none');
				 	 			$(body[k]).css('display','none');
								$(topic_id[k]).css('display','none');

				 	  k++;
					},1000);
				 	
				 	}

				 	
							
				
				
			
});

		
	
</script>

</head>
<body>
</body>


</html>